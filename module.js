/*! For license information please see module.js.LICENSE.txt */
define(["react","@grafana/data","@grafana/ui","@grafana/runtime"],(e,r,t,a)=>(()=>{"use strict";var n={7:e=>{e.exports=t},192:(e,r,t)=>{var a=t(959),n=Symbol.for("react.element"),s=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function c(e,r,t){var a,c={},l=null,d=null;for(a in void 0!==t&&(l=""+t),void 0!==r.key&&(l=""+r.key),void 0!==r.ref&&(d=r.ref),r)s.call(r,a)&&!i.hasOwnProperty(a)&&(c[a]=r[a]);if(e&&e.defaultProps)for(a in r=e.defaultProps)void 0===c[a]&&(c[a]=r[a]);return{$$typeof:n,type:e,key:l,ref:d,props:c,_owner:o.current}}r.jsx=c,r.jsxs=c},531:e=>{e.exports=a},540:(e,r,t)=>{e.exports=t(192)},781:e=>{e.exports=r},959:r=>{r.exports=e}},s={};function o(e){var r=s[e];if(void 0!==r)return r.exports;var t=s[e]={exports:{}};return n[e](t,t.exports,o),t.exports}o.d=(e,r)=>{for(var t in r)o.o(r,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},o.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};o.r(i),o.d(i,{plugin:()=>Ge});var c=o(540),l=o(959),d=o(781),u=o(7),f=o(531),p=function(){function e(e){var r=this;this._insertTag=function(e){var t;t=0===r.tags.length?r.insertionPoint?r.insertionPoint.nextSibling:r.prepend?r.container.firstChild:r.before:r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(e,t),r.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var r=e.prototype;return r.hydrate=function(e){e.forEach(this._insertTag)},r.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var r=document.createElement("style");return r.setAttribute("data-emotion",e.key),void 0!==e.nonce&&r.setAttribute("nonce",e.nonce),r.appendChild(document.createTextNode("")),r.setAttribute("data-s",""),r}(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var t=function(e){if(e.sheet)return e.sheet;for(var r=0;r<document.styleSheets.length;r++)if(document.styleSheets[r].ownerNode===e)return document.styleSheets[r]}(r);try{t.insertRule(e,t.cssRules.length)}catch(e){}}else r.appendChild(document.createTextNode(e));this.ctr++},r.flush=function(){this.tags.forEach(function(e){var r;return null==(r=e.parentNode)?void 0:r.removeChild(e)}),this.tags=[],this.ctr=0},e}(),h=Math.abs,g=String.fromCharCode,b=Object.assign;function v(e){return e.trim()}function m(e,r,t){return e.replace(r,t)}function y(e,r){return e.indexOf(r)}function x(e,r){return 0|e.charCodeAt(r)}function j(e,r,t){return e.slice(r,t)}function w(e){return e.length}function $(e){return e.length}function k(e,r){return r.push(e),e}var O=1,S=1,C=0,A=0,N=0,z="";function T(e,r,t,a,n,s,o){return{value:e,root:r,parent:t,type:a,props:n,children:s,line:O,column:S,length:o,return:""}}function E(e,r){return b(T("",null,null,"",null,null,0),e,{length:-e.length},r)}function _(){return N=A>0?x(z,--A):0,S--,10===N&&(S=1,O--),N}function G(){return N=A<C?x(z,A++):0,S++,10===N&&(S=1,O++),N}function P(){return x(z,A)}function R(){return A}function I(e,r){return j(z,e,r)}function H(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function B(e){return O=S=1,C=w(z=e),A=0,[]}function L(e){return z="",e}function F(e){return v(I(A-1,W(91===e?e+2:40===e?e+1:e)))}function D(e){for(;(N=P())&&N<33;)G();return H(e)>2||H(N)>3?"":" "}function M(e,r){for(;--r&&G()&&!(N<48||N>102||N>57&&N<65||N>70&&N<97););return I(e,R()+(r<6&&32==P()&&32==G()))}function W(e){for(;G();)switch(N){case e:return A;case 34:case 39:34!==e&&39!==e&&W(N);break;case 40:41===e&&W(e);break;case 92:G()}return A}function U(e,r){for(;G()&&e+N!==57&&(e+N!==84||47!==P()););return"/*"+I(r,A-1)+"*"+g(47===e?e:G())}function V(e){for(;!H(P());)G();return I(e,A)}var q="-ms-",J="-moz-",Z="-webkit-",Y="comm",K="rule",Q="decl",X="@keyframes";function ee(e,r){for(var t="",a=$(e),n=0;n<a;n++)t+=r(e[n],n,e,r)||"";return t}function re(e,r,t,a){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case Q:return e.return=e.return||e.value;case Y:return"";case X:return e.return=e.value+"{"+ee(e.children,a)+"}";case K:e.value=e.props.join(",")}return w(t=ee(e.children,a))?e.return=e.value+"{"+t+"}":""}function te(e){return L(ae("",null,null,null,[""],e=B(e),0,[0],e))}function ae(e,r,t,a,n,s,o,i,c){for(var l=0,d=0,u=o,f=0,p=0,h=0,b=1,v=1,j=1,$=0,O="",S=n,C=s,A=a,N=O;v;)switch(h=$,$=G()){case 40:if(108!=h&&58==x(N,u-1)){-1!=y(N+=m(F($),"&","&\f"),"&\f")&&(j=-1);break}case 34:case 39:case 91:N+=F($);break;case 9:case 10:case 13:case 32:N+=D(h);break;case 92:N+=M(R()-1,7);continue;case 47:switch(P()){case 42:case 47:k(se(U(G(),R()),r,t),c);break;default:N+="/"}break;case 123*b:i[l++]=w(N)*j;case 125*b:case 59:case 0:switch($){case 0:case 125:v=0;case 59+d:-1==j&&(N=m(N,/\f/g,"")),p>0&&w(N)-u&&k(p>32?oe(N+";",a,t,u-1):oe(m(N," ","")+";",a,t,u-2),c);break;case 59:N+=";";default:if(k(A=ne(N,r,t,l,d,n,i,O,S=[],C=[],u),s),123===$)if(0===d)ae(N,r,A,A,S,s,u,i,C);else switch(99===f&&110===x(N,3)?100:f){case 100:case 108:case 109:case 115:ae(e,A,A,a&&k(ne(e,A,A,0,0,n,i,O,n,S=[],u),C),n,C,u,i,a?S:C);break;default:ae(N,A,A,A,[""],C,0,i,C)}}l=d=p=0,b=j=1,O=N="",u=o;break;case 58:u=1+w(N),p=h;default:if(b<1)if(123==$)--b;else if(125==$&&0==b++&&125==_())continue;switch(N+=g($),$*b){case 38:j=d>0?1:(N+="\f",-1);break;case 44:i[l++]=(w(N)-1)*j,j=1;break;case 64:45===P()&&(N+=F(G())),f=P(),d=u=w(O=N+=V(R())),$++;break;case 45:45===h&&2==w(N)&&(b=0)}}return s}function ne(e,r,t,a,n,s,o,i,c,l,d){for(var u=n-1,f=0===n?s:[""],p=$(f),g=0,b=0,y=0;g<a;++g)for(var x=0,w=j(e,u+1,u=h(b=o[g])),k=e;x<p;++x)(k=v(b>0?f[x]+" "+w:m(w,/&\f/g,f[x])))&&(c[y++]=k);return T(e,r,t,0===n?K:i,c,l,d)}function se(e,r,t){return T(e,r,t,Y,g(N),j(e,2,-2),0)}function oe(e,r,t,a){return T(e,r,t,Q,j(e,0,a),j(e,a+1,-1),a)}var ie=function(e,r,t){for(var a=0,n=0;a=n,n=P(),38===a&&12===n&&(r[t]=1),!H(n);)G();return I(e,A)},ce=new WeakMap,le=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var r=e.value,t=e.parent,a=e.column===t.column&&e.line===t.line;"rule"!==t.type;)if(!(t=t.parent))return;if((1!==e.props.length||58===r.charCodeAt(0)||ce.get(t))&&!a){ce.set(e,!0);for(var n=[],s=function(e,r){return L(function(e,r){var t=-1,a=44;do{switch(H(a)){case 0:38===a&&12===P()&&(r[t]=1),e[t]+=ie(A-1,r,t);break;case 2:e[t]+=F(a);break;case 4:if(44===a){e[++t]=58===P()?"&\f":"",r[t]=e[t].length;break}default:e[t]+=g(a)}}while(a=G());return e}(B(e),r))}(r,n),o=t.props,i=0,c=0;i<s.length;i++)for(var l=0;l<o.length;l++,c++)e.props[c]=n[i]?s[i].replace(/&\f/g,o[l]):o[l]+" "+s[i]}}},de=function(e){if("decl"===e.type){var r=e.value;108===r.charCodeAt(0)&&98===r.charCodeAt(2)&&(e.return="",e.value="")}};function ue(e,r){switch(function(e,r){return 45^x(e,0)?(((r<<2^x(e,0))<<2^x(e,1))<<2^x(e,2))<<2^x(e,3):0}(e,r)){case 5103:return Z+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Z+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Z+e+J+e+q+e+e;case 6828:case 4268:return Z+e+q+e+e;case 6165:return Z+e+q+"flex-"+e+e;case 5187:return Z+e+m(e,/(\w+).+(:[^]+)/,Z+"box-$1$2"+q+"flex-$1$2")+e;case 5443:return Z+e+q+"flex-item-"+m(e,/flex-|-self/,"")+e;case 4675:return Z+e+q+"flex-line-pack"+m(e,/align-content|flex-|-self/,"")+e;case 5548:return Z+e+q+m(e,"shrink","negative")+e;case 5292:return Z+e+q+m(e,"basis","preferred-size")+e;case 6060:return Z+"box-"+m(e,"-grow","")+Z+e+q+m(e,"grow","positive")+e;case 4554:return Z+m(e,/([^-])(transform)/g,"$1"+Z+"$2")+e;case 6187:return m(m(m(e,/(zoom-|grab)/,Z+"$1"),/(image-set)/,Z+"$1"),e,"")+e;case 5495:case 3959:return m(e,/(image-set\([^]*)/,Z+"$1$`$1");case 4968:return m(m(e,/(.+:)(flex-)?(.*)/,Z+"box-pack:$3"+q+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Z+e+e;case 4095:case 3583:case 4068:case 2532:return m(e,/(.+)-inline(.+)/,Z+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(w(e)-1-r>6)switch(x(e,r+1)){case 109:if(45!==x(e,r+4))break;case 102:return m(e,/(.+:)(.+)-([^]+)/,"$1"+Z+"$2-$3$1"+J+(108==x(e,r+3)?"$3":"$2-$3"))+e;case 115:return~y(e,"stretch")?ue(m(e,"stretch","fill-available"),r)+e:e}break;case 4949:if(115!==x(e,r+1))break;case 6444:switch(x(e,w(e)-3-(~y(e,"!important")&&10))){case 107:return m(e,":",":"+Z)+e;case 101:return m(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Z+(45===x(e,14)?"inline-":"")+"box$3$1"+Z+"$2$3$1"+q+"$2box$3")+e}break;case 5936:switch(x(e,r+11)){case 114:return Z+e+q+m(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Z+e+q+m(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Z+e+q+m(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Z+e+q+e+e}return e}var fe=[function(e,r,t,a){if(e.length>-1&&!e.return)switch(e.type){case Q:e.return=ue(e.value,e.length);break;case X:return ee([E(e,{value:m(e.value,"@","@"+Z)})],a);case K:if(e.length)return function(e,r){return e.map(r).join("")}(e.props,function(r){switch(function(e){return(e=/(::plac\w+|:read-\w+)/.exec(e))?e[0]:e}(r)){case":read-only":case":read-write":return ee([E(e,{props:[m(r,/:(read-\w+)/,":-moz-$1")]})],a);case"::placeholder":return ee([E(e,{props:[m(r,/:(plac\w+)/,":"+Z+"input-$1")]}),E(e,{props:[m(r,/:(plac\w+)/,":-moz-$1")]}),E(e,{props:[m(r,/:(plac\w+)/,q+"input-$1")]})],a)}return""})}}],pe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function he(e){var r=Object.create(null);return function(t){return void 0===r[t]&&(r[t]=e(t)),r[t]}}var ge=/[A-Z]|^ms/g,be=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ve=function(e){return 45===e.charCodeAt(1)},me=function(e){return null!=e&&"boolean"!=typeof e},ye=he(function(e){return ve(e)?e:e.replace(ge,"-$&").toLowerCase()}),xe=function(e,r){switch(e){case"animation":case"animationName":if("string"==typeof r)return r.replace(be,function(e,r,t){return we={name:r,styles:t,next:we},r})}return 1===pe[e]||ve(e)||"number"!=typeof r||0===r?r:r+"px"};function je(e,r,t){if(null==t)return"";var a=t;if(void 0!==a.__emotion_styles)return a;switch(typeof t){case"boolean":return"";case"object":var n=t;if(1===n.anim)return we={name:n.name,styles:n.styles,next:we},n.name;var s=t;if(void 0!==s.styles){var o=s.next;if(void 0!==o)for(;void 0!==o;)we={name:o.name,styles:o.styles,next:we},o=o.next;return s.styles+";"}return function(e,r,t){var a="";if(Array.isArray(t))for(var n=0;n<t.length;n++)a+=je(e,r,t[n])+";";else for(var s in t){var o=t[s];if("object"!=typeof o){var i=o;null!=r&&void 0!==r[i]?a+=s+"{"+r[i]+"}":me(i)&&(a+=ye(s)+":"+xe(s,i)+";")}else if(!Array.isArray(o)||"string"!=typeof o[0]||null!=r&&void 0!==r[o[0]]){var c=je(e,r,o);switch(s){case"animation":case"animationName":a+=ye(s)+":"+c+";";break;default:a+=s+"{"+c+"}"}}else for(var l=0;l<o.length;l++)me(o[l])&&(a+=ye(s)+":"+xe(s,o[l])+";")}return a}(e,r,t);case"function":if(void 0!==e){var i=we,c=t(e);return we=i,je(e,r,c)}}var l=t;if(null==r)return l;var d=r[l];return void 0!==d?d:l}var we,$e=/label:\s*([^\s;{]+)\s*(;|$)/g;function ke(e,r,t){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var a=!0,n="";we=void 0;var s=e[0];null==s||void 0===s.raw?(a=!1,n+=je(t,r,s)):n+=s[0];for(var o=1;o<e.length;o++)n+=je(t,r,e[o]),a&&(n+=s[o]);$e.lastIndex=0;for(var i,c="";null!==(i=$e.exec(n));)c+="-"+i[1];var l=function(e){for(var r,t=0,a=0,n=e.length;n>=4;++a,n-=4)r=1540483477*(65535&(r=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+(59797*(r>>>16)<<16),t=1540483477*(65535&(r^=r>>>24))+(59797*(r>>>16)<<16)^1540483477*(65535&t)+(59797*(t>>>16)<<16);switch(n){case 3:t^=(255&e.charCodeAt(a+2))<<16;case 2:t^=(255&e.charCodeAt(a+1))<<8;case 1:t=1540483477*(65535&(t^=255&e.charCodeAt(a)))+(59797*(t>>>16)<<16)}return(((t=1540483477*(65535&(t^=t>>>13))+(59797*(t>>>16)<<16))^t>>>15)>>>0).toString(36)}(n)+c;return{name:l,styles:n,next:we}}function Oe(e,r,t){var a="";return t.split(" ").forEach(function(t){void 0!==e[t]?r.push(e[t]+";"):t&&(a+=t+" ")}),a}function Se(e,r){if(void 0===e.inserted[r.name])return e.insert("",r,e.sheet,!0)}function Ce(e,r,t){var a=[],n=Oe(e,a,t);return a.length<2?t:n+r(a)}var Ae=function e(r){for(var t="",a=0;a<r.length;a++){var n=r[a];if(null!=n){var s=void 0;switch(typeof n){case"boolean":break;case"object":if(Array.isArray(n))s=e(n);else for(var o in s="",n)n[o]&&o&&(s&&(s+=" "),s+=o);break;default:s=n}s&&(t&&(t+=" "),t+=s)}}return t},Ne=function(){var e=function(e){var r=e.key;if("css"===r){var t=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(t,function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))})}var a,n,s=e.stylisPlugins||fe,o={},i=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(e){for(var r=e.getAttribute("data-emotion").split(" "),t=1;t<r.length;t++)o[r[t]]=!0;i.push(e)});var c,l,d,u,f=[re,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],h=(l=[le,de].concat(s,f),d=$(l),function(e,r,t,a){for(var n="",s=0;s<d;s++)n+=l[s](e,r,t,a)||"";return n});n=function(e,r,t,a){c=t,ee(te(e?e+"{"+r.styles+"}":r.styles),h),a&&(g.inserted[r.name]=!0)};var g={key:r,sheet:new p({key:r,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:n};return g.sheet.hydrate(i),g}({key:"css"});e.sheet.speedy=function(e){this.isSpeedy=e},e.compat=!0;var r=function(){for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];var n=ke(t,e.registered,void 0);return function(e,r){!function(e,r){var t=e.key+"-"+r.name;void 0===e.registered[t]&&(e.registered[t]=r.styles)}(e,r);var t=e.key+"-"+r.name;if(void 0===e.inserted[r.name]){var a=r;do{e.insert(r===a?"."+t:"",a,e.sheet,!0),a=a.next}while(void 0!==a)}}(e,n),e.key+"-"+n.name};return{css:r,cx:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return Ce(e.registered,r,Ae(a))},injectGlobal:function(){for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];var n=ke(t,e.registered);Se(e,n)},keyframes:function(){for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];var n=ke(t,e.registered),s="animation-"+n.name;return Se(e,{name:n.name,styles:"@keyframes "+s+"{"+n.styles+"}"}),s},hydrate:function(r){r.forEach(function(r){e.inserted[r]=!0})},flush:function(){e.registered={},e.inserted={},e.sheet.flush()},sheet:e.sheet,cache:e,getRegisteredStyles:Oe.bind(null,e.registered),merge:Ce.bind(null,e.registered,r)}}(),ze=(Ne.flush,Ne.hydrate,Ne.cx,Ne.merge,Ne.getRegisteredStyles,Ne.injectGlobal,Ne.keyframes,Ne.css),Te=(Ne.sheet,Ne.cache,function(e,r,t,a){return new(t||(t=Promise))(function(n,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function i(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t(function(e){e(r)})).then(o,i)}c((a=a.apply(e,r||[])).next())})});const Ee=()=>{const e=(0,u.useTheme2)(),[r,t]=(0,l.useState)([]),[a,n]=(0,l.useState)(new Set),[s,o]=(0,l.useState)(!1),[i,d]=(0,l.useState)(!1),[p,h]=(0,l.useState)(""),[g,b]=(0,l.useState)(""),[v,m]=(0,l.useState)(""),[y,x]=(0,l.useState)(!1),[j,w]=(0,l.useState)({token:"",owner:"",repo:"",branch:"main",path:"dashboards"}),[$,k]=(0,l.useState)(null),[O,S]=(0,l.useState)([]),[C,A]=(0,l.useState)([]),[N,z]=(0,l.useState)(!1),[T,E]=(0,l.useState)(""),_=_e(e);(0,l.useEffect)(()=>{R(),P(),G()},[]);const G=()=>Te(void 0,void 0,void 0,function*(){try{const e=yield(0,f.getBackendSrv)().get("/api/user");if(e){E(e.orgRole||"");const r="Admin"===e.orgRole||e.isGrafanaAdmin;z(r),r||k({type:"info",message:"Apenas administradores podem configurar as credenciais do GitHub"})}}catch(e){console.error("Error checking user role:",e),z(!1),k({type:"error",message:"Erro ao verificar permissÃµes do usuÃ¡rio"})}}),P=()=>Te(void 0,void 0,void 0,function*(){try{const e=yield(0,f.getBackendSrv)().get("/api/plugins/grafana-github-export-config/settings");e&&e.jsonData&&w(e.jsonData)}catch(e){console.warn("Config not found, using defaults")}}),R=()=>Te(void 0,void 0,void 0,function*(){o(!0);try{const e=yield(0,f.getBackendSrv)().get("/api/search",{type:"dash-db",limit:1e3});t(e);const r=new Set,a=new Set;e.forEach(e=>{var t;null===(t=e.tags)||void 0===t||t.forEach(e=>r.add(e)),e.folderTitle&&a.add(e.folderTitle)}),S(Array.from(r).sort()),A(Array.from(a).sort())}catch(e){console.error("Error loading dashboards:",e),k({type:"error",message:"Erro ao carregar dashboards"})}finally{o(!1)}}),I=(e,r,t)=>Te(void 0,void 0,void 0,function*(){const a=`https://api.github.com/repos/${j.owner}/${j.repo}/contents/${e}`;let n;try{const e=yield fetch(a,{headers:{Authorization:`token ${j.token}`,Accept:"application/vnd.github.v3+json"}});e.ok&&(n=(yield e.json()).sha)}catch(e){}const s={message:t,content:btoa(unescape(encodeURIComponent(r))),branch:j.branch};n&&(s.sha=n);const o=yield fetch(a,{method:"PUT",headers:{Authorization:`token ${j.token}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok){const e=yield o.json();throw new Error(`GitHub API error: ${e.message}`)}return o.json()}),H=r.filter(e=>{var r,t;const a=e.title.toLowerCase().includes(p.toLowerCase())||(null===(r=e.tags)||void 0===r?void 0:r.some(e=>e.toLowerCase().includes(p.toLowerCase()))),n=!g||(null===(t=e.tags)||void 0===t?void 0:t.includes(g)),s=!v||e.folderTitle===v;return a&&n&&s}),B=[{label:"Todas as tags",value:""},...O.map(e=>({label:e,value:e}))],L=[{label:"Todas as pastas",value:""},...C.map(e=>({label:e,value:e}))];return(0,c.jsx)("div",Object.assign({className:_.container},{children:(0,c.jsxs)(u.VerticalGroup,Object.assign({spacing:"lg"},{children:[(0,c.jsxs)("div",Object.assign({className:_.header},{children:[(0,c.jsxs)("div",Object.assign({className:_.headerTitle},{children:[(0,c.jsx)("h2",{children:"Export Dashboards para GitHub"}),!N&&(0,c.jsxs)("div",Object.assign({className:_.roleInfo},{children:[(0,c.jsxs)("span",Object.assign({className:_.roleLabel},{children:["Perfil: ",T]})),(0,c.jsx)("span",Object.assign({className:_.roleNote},{children:"(Apenas administradores podem configurar GitHub)"}))]}))]})),(0,c.jsxs)(u.HorizontalGroup,{children:[N&&(0,c.jsx)(u.Button,Object.assign({variant:"secondary",icon:"cog",onClick:()=>{N?x(!0):k({type:"error",message:"VocÃª nÃ£o tem permissÃ£o para editar configuraÃ§Ãµes"})}},{children:"Configurar GitHub"})),(0,c.jsxs)(u.Button,Object.assign({variant:"primary",icon:"cloud-upload",onClick:()=>Te(void 0,void 0,void 0,function*(){if(0===a.size)return void k({type:"error",message:"Selecione pelo menos um dashboard"});if(!j.token||!j.owner||!j.repo)return void k({type:"error",message:"GitHub ainda nÃ£o foi configurado pelo administrador."});d(!0);let e=0,r=0;try{for(const t of a)try{const r=(yield(0,f.getBackendSrv)().get(`/api/dashboards/uid/${t}`)).dashboard,a=`${r.title.replace(/[^a-zA-Z0-9\s-]/g,"").replace(/\s+/g,"-").toLowerCase()}.json`,n=j.path?`${j.path}/${a}`:a,s=JSON.stringify(r,null,2);yield I(n,s,`Add dashboard: ${r.title}`),e++}catch(e){console.error(`Error exporting dashboard ${t}:`,e),r++}e>0?(k({type:"success",message:`${e} dashboard(s) exportado(s) com sucesso${r>0?`. ${r} erro(s).`:""}`}),n(new Set)):k({type:"error",message:"Falha ao exportar dashboards"})}catch(e){console.error("Export error:",e),k({type:"error",message:"Erro durante a exportaÃ§Ã£o"})}finally{d(!1)}}),disabled:0===a.size||i||!j.token||!j.owner||!j.repo},{children:[i?(0,c.jsx)(u.Spinner,{size:"sm"}):null,"Exportar Selecionados (",a.size,")"]})),!N&&(0,c.jsx)(u.Button,Object.assign({variant:"secondary",icon:"info-circle",onClick:()=>k({type:"info",message:"ConfiguraÃ§Ã£o GitHub: "+(j.owner?`${j.owner}/${j.repo}`:"NÃ£o configurado")})},{children:"Ver ConfiguraÃ§Ã£o"}))]})]})),$&&(0,c.jsx)(u.Alert,{title:$.message,severity:$.type,onRemove:()=>k(null)}),(0,c.jsx)("div",Object.assign({className:_.filters},{children:(0,c.jsxs)(u.HorizontalGroup,Object.assign({spacing:"md"},{children:[(0,c.jsx)(u.Field,Object.assign({label:"Buscar"},{children:(0,c.jsx)(u.Input,{value:p,onChange:e=>h(e.currentTarget.value),placeholder:"Nome do dashboard ou tag...",width:30})})),(0,c.jsx)(u.Field,Object.assign({label:"Filtrar por tag"},{children:(0,c.jsx)(u.Select,{value:g,onChange:e=>b((null==e?void 0:e.value)||""),options:B,width:25})})),(0,c.jsx)(u.Field,Object.assign({label:"Filtrar por pasta"},{children:(0,c.jsx)(u.Select,{value:v,onChange:e=>m((null==e?void 0:e.value)||""),options:L,width:25})}))]}))})),(0,c.jsxs)("div",Object.assign({className:_.dashboardSection},{children:[(0,c.jsx)("div",Object.assign({className:_.dashboardHeader},{children:(0,c.jsx)("h3",Object.assign({className:_.sectionTitle},{children:"ðŸ“‹ Dashboards DisponÃ­veis"}))})),(0,c.jsx)("div",Object.assign({className:_.dashboardControls},{children:(0,c.jsxs)(u.HorizontalGroup,Object.assign({spacing:"md"},{children:[(0,c.jsx)(u.Button,Object.assign({variant:"secondary",size:"sm",onClick:()=>{a.size===H.length?n(new Set):n(new Set(H.map(e=>e.uid)))}},{children:a.size===H.length?"Desmarcar Todos":"Selecionar Todos"})),(0,c.jsx)(u.Button,Object.assign({variant:"secondary",size:"sm",icon:"sync",onClick:R,disabled:s},{children:"Atualizar"}))]}))})),(0,c.jsx)(u.Card,Object.assign({className:_.dashboardCard},{children:s?(0,c.jsxs)("div",Object.assign({className:_.loading},{children:[(0,c.jsx)(u.Spinner,{size:"lg"}),(0,c.jsx)("span",{children:"Carregando dashboards..."})]})):(0,c.jsxs)("div",Object.assign({className:_.dashboardList},{children:[H.map(e=>(0,c.jsxs)("div",Object.assign({className:_.dashboardItem},{children:[(0,c.jsx)(u.Checkbox,{value:a.has(e.uid),onChange:()=>(e=>{const r=new Set(a);r.has(e)?r.delete(e):r.add(e),n(r)})(e.uid)}),(0,c.jsxs)("div",Object.assign({className:_.dashboardInfo},{children:[(0,c.jsx)("div",Object.assign({className:_.dashboardTitle},{children:e.title})),(0,c.jsxs)("div",Object.assign({className:_.dashboardMeta},{children:[e.folderTitle&&(0,c.jsxs)("span",Object.assign({className:_.folder},{children:["ðŸ“ ",e.folderTitle]})),e.tags&&e.tags.length>0&&(0,c.jsx)("div",Object.assign({className:_.tags},{children:e.tags.map(e=>(0,c.jsx)("span",Object.assign({className:_.tag},{children:e}),e))}))]}))]}))]}),e.uid)),0===H.length&&!s&&(0,c.jsx)("div",Object.assign({className:_.emptyState},{children:"Nenhum dashboard encontrado"}))]}))}))]})),y&&(0,c.jsx)(u.Modal,Object.assign({title:"Configurar GitHub",isOpen:y,onDismiss:()=>x(!1)},{children:(0,c.jsxs)(u.VerticalGroup,Object.assign({spacing:"md"},{children:[(0,c.jsx)(u.Field,Object.assign({label:"GitHub Token",description:"Token pessoal com permissÃµes de repositÃ³rio"},{children:(0,c.jsx)(u.Input,{type:"password",value:j.token,onChange:e=>w(Object.assign(Object.assign({},j),{token:e.currentTarget.value})),placeholder:"ghp_xxxxxxxxxxxx"})})),(0,c.jsx)(u.Field,Object.assign({label:"Owner/OrganizaÃ§Ã£o"},{children:(0,c.jsx)(u.Input,{value:j.owner,onChange:e=>w(Object.assign(Object.assign({},j),{owner:e.currentTarget.value})),placeholder:"username ou organization"})})),(0,c.jsx)(u.Field,Object.assign({label:"RepositÃ³rio"},{children:(0,c.jsx)(u.Input,{value:j.repo,onChange:e=>w(Object.assign(Object.assign({},j),{repo:e.currentTarget.value})),placeholder:"nome-do-repositorio"})})),(0,c.jsx)(u.Field,Object.assign({label:"Branch"},{children:(0,c.jsx)(u.Input,{value:j.branch,onChange:e=>w(Object.assign(Object.assign({},j),{branch:e.currentTarget.value})),placeholder:"main"})})),(0,c.jsx)(u.Field,Object.assign({label:"Caminho no repositÃ³rio",description:"Pasta onde os dashboards serÃ£o salvos"},{children:(0,c.jsx)(u.Input,{value:j.path,onChange:e=>w(Object.assign(Object.assign({},j),{path:e.currentTarget.value})),placeholder:"dashboards"})})),(0,c.jsxs)(u.HorizontalGroup,{children:[(0,c.jsx)(u.Button,Object.assign({variant:"primary",onClick:()=>{var e;N?(e=j,Te(void 0,void 0,void 0,function*(){yield(0,f.getBackendSrv)().post("/api/plugins/grafana-github-export-config/settings",{enabled:!0,jsonData:e})}),x(!1),k({type:"success",message:"ConfiguraÃ§Ã£o salva com sucesso"})):k({type:"error",message:"Apenas administradores podem salvar configuraÃ§Ãµes do GitHub"})}},{children:"Salvar"})),(0,c.jsx)(u.Button,Object.assign({variant:"secondary",onClick:()=>x(!1)},{children:"Cancelar"}))]})]}))}))]}))}))},_e=e=>({container:ze`
    padding: ${e.spacing(3)};
    max-width: 1200px;
  `,header:ze`
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: ${e.spacing(2)};
  `,headerTitle:ze`
    display: flex;
    flex-direction: column;
    gap: ${e.spacing(1)};
  `,roleInfo:ze`
    display: flex;
    flex-direction: column;
    gap: ${e.spacing(.5)};
  `,roleLabel:ze`
    font-size: ${e.typography.bodySmall.fontSize};
    color: ${e.colors.text.secondary};
    font-weight: ${e.typography.fontWeightMedium};
  `,roleNote:ze`
    font-size: ${e.typography.bodySmall.fontSize};
    color: ${e.colors.warning.text};
    font-style: italic;
  `,filters:ze`
    padding: ${e.spacing(2)};
    background: ${e.colors.background.secondary};
    border-radius: ${e.shape.borderRadius()};
  `,dashboardSection:ze`
    display: flex;
    flex-direction: column;
    gap: ${e.spacing(2)};
  `,dashboardHeader:ze`
    display: flex;
    align-items: center;
    margin-bottom: ${e.spacing(1)};
  `,sectionTitle:ze`
    margin: 0;
    font-size: ${e.typography.h4.fontSize};
    font-weight: ${e.typography.fontWeightMedium};
    color: ${e.colors.text.primary};
  `,dashboardControls:ze`
    display: flex;
    justify-content: flex-start;
    align-items: center;
    margin-bottom: ${e.spacing(2)};
  `,dashboardCard:ze`
    overflow: hidden;
  `,loading:ze`
    display: flex;
    align-items: center;
    justify-content: center;
    padding: ${e.spacing(4)};
    gap: ${e.spacing(2)};
  `,dashboardList:ze`
    max-height: 600px;
    overflow-y: auto;
  `,dashboardItem:ze`
    display: flex;
    align-items: flex-start;
    padding: ${e.spacing(2)};
    border-bottom: 1px solid ${e.colors.border.weak};
    gap: ${e.spacing(2)};

    &:hover {
      background: ${e.colors.background.secondary};
    }
  `,dashboardInfo:ze`
    flex: 1;
  `,dashboardTitle:ze`
    font-weight: ${e.typography.fontWeightMedium};
    margin-bottom: ${e.spacing(1)};
  `,dashboardMeta:ze`
    display: flex;
    align-items: center;
    gap: ${e.spacing(2)};
    font-size: ${e.typography.bodySmall.fontSize};
    color: ${e.colors.text.secondary};
  `,folder:ze`
    display: flex;
    align-items: center;
    gap: ${e.spacing(.5)};
  `,tags:ze`
    display: flex;
    gap: ${e.spacing(1)};
    flex-wrap: wrap;
  `,tag:ze`
    background: ${e.colors.background.canvas};
    padding: ${e.spacing(.5,1)};
    border-radius: ${e.shape.borderRadius()};
    font-size: ${e.typography.bodySmall.fontSize};
    border: 1px solid ${e.colors.border.weak};
  `,emptyState:ze`
    text-align: center;
    padding: ${e.spacing(4)};
    color: ${e.colors.text.secondary};
  `}),Ge=(new d.AppPlugin).setRootPage(e=>{const{path:r}=e;return(0,c.jsx)(l.Suspense,Object.assign({fallback:(0,c.jsx)(u.LoadingPlaceholder,{text:"Carregando Dashboard Exporter..."})},{children:(0,c.jsx)(Ee,{})}))});return i})());
//# sourceMappingURL=module.js.map